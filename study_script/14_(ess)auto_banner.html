<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>자동 배너</title>
  <style>
    .banner {width:800px;height: 400px;border: 1px solid gray; position: relative;overflow: hidden;}
    .ban_box {font-size: 180px;position: absolute;left: 0; top: 0; background-color: #ebebeb;width: 100%; height: 100%;}
    .ban_box:first-child {z-index: 10;}
    .btn {position: absolute;bottom: 10px;left: 380px;z-index: 10;}
  </style>
</head>
<body>
  <div class="banner">
    <ul>
      <li class="ban_box">banner1</li>
      <li class="ban_box">banner2</li>
      <li class="ban_box">banner3</li>
    </ul>
    <div class="btn">
      <button type="button">1</button>
      <button type="button">2</button>
      <button type="button">3</button>
    </div>
    </div>
  <script>
    // banner의 style(z-index)을 바꿔주는 함수 만들기
    const ban = document.querySelectorAll('.ban_box');
    let chaneBanner = (i)=> {
      for(k=0;k<ban.length;k++){
        ban[k].style.zIndex = 1;
      }
      ban[i].style.zIndex = 10;
    }

    // button
    const btn = document.querySelectorAll('button')
    btn.forEach((item, i)=> {
      item.addEventListener('click', ()=>{chaneBanner(i)});
    });

    //배너가 자동으로 넘어가는 함수
    //on을 부여해야겠지?
    let cnt = 0
    function slide(){
      // 0,1,2 ... ctn=1(banner2),2(banner3)...
      // 2일때까지 돌아가면 if문에 걸려서 cnt가 3이 되고, 인덱스3(banner4)를 찾게 되기 때문에 오류가 난다.
      // banner1(index0)은 어차피 if문에 걸리기전에 cnt=0에서 출력된다.
      // cnt < 3 (X)
      // cnt < 3-1 (O)
      if(cnt<ban.length-1){
        cnt++
      }else{
        cnt = 0
      }
      for(i=0;i<ban.length;i++){
        ban[i].style.zIndex = 1
      }
      ban[cnt].style.zIndex = 10
    };

    // 작동 함수를 변수에 넣어주자.
    let slideAuto = setInterval(()=>{
      slide()
      // console.log('반복중')
    }, 2000)

    //mouse를 가져다 대면 멈추는 배너
    for(i=0;i<ban.length;i++){
      ban[i].addEventListener('mouseenter',()=>{
        console.log('enter')
        clearInterval(slideAuto)
      });
    }

    // 마우스오버시 자동실행 재개
    let banBox = document.querySelector('.banner');
    banBox.addEventListener('mouseleave', ()=>{
      console.log('leave')
      slide()
      // console.log('반복중')
    });

  </script>

  <!-- 2번째 배너에 적용 -->
  <!-- <script>
    const bannerLists = document.querySelectorAll('.banner2 li');
    const indicator = document.querySelectorAll('.banner2 .indicator span');

    function chaneBanner(cntIcon){
      autoNum = cntIcon;
      for(let i=0;i<bannerList.length;i++){
        bannerList[i].className = '';
        indicator[i].className = '';
      }
    };

    // 자동실행 : 0 > 1 > 2 > 0 > 1 ...
    let autoNum = 0;
    let autoID=null;
    function autoBanner(){
      // 지역변수
      autoID = setInterval(()=>{
        autoNum++;
        if(autoNum>2){autoNum=0;} // 있다가 배너개수를 얻어와서 완성
        //console.log(autoNum)
        changeBanner(autoNum)
      },2000);
    };

    autoBanner(); //호출
    // 마우스오버시 자동실행 제거
    let banner = document.querySelector('.banner2');
    banner.addEventListener('mouseleave', ()=>{
      clearInterval(autoID);
    });

    banner.addEventListener('mouseleave', ()=>{
      autoBanner();
    });
  </script> -->
</body>
</html>